<!DOCTYPE html>
<html>	
	<head>
		<title>Gravity phenomenon</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="Libraries/three/build/three.js"></script>
        <script type="text/javascript" src="Libraries/three/examples/js/controls/OrbitControls.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>
        
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<style>
		  body{
		/* set margin to 0 and overflow to hidden, 
		to use the complete page */
		      margin: 0;
		      overflow: hidden;
		  }
          #gui { 
              position: absolute; 
              top: 2px; 
              left: 2px; 
            }
            @media only screen and (max-width: 768px) {
                #gui{
                    width: 100%;
                }
            }
		</style>
	</head>
	<body>
		<!--Div which will hold the Output -->
        
        <div id="WebGL-output">
        </div>
        
		<!--Javascript code that runs our Three.js examples -->
		<script type="text/javascript">
            
            const HEIGHT=window.innerHeight
            const WIDTH=window.innerWidth
            
            var g=0.001
            var STOP_TIME=-1
            time=0
		    var scene = new THREE.Scene();
            //window.addEventListener("wheel", onMouseWheel);
            
            
            
            //setting camera
            var camera = new THREE.PerspectiveCamera(100, WIDTH / HEIGHT, 0.1, 100000);
            camera.position.z = 200;
            

            var material =new THREE.MeshPhongMaterial({shininess:10, color: 0xffffff})
            
            
            var gui = new dat.gui.GUI();
            gui.domElement.id = 'gui';
            
            var objs=[]/*
                 new Objects([0,0,0], [0,0,0], [100000, 30], "1", "star"),
                 new Objects([100,0,0], [0,1,0], [100, 7], "2", "planet"),
                 new Objects([-100,0,0], [0,0.65,0.4], [100, 10], "3", "planet")    
                     ]   */
            
            //0;0;0;0;0;0;100000;30;#ffffff;Star;star---0;100;0;1;0;0;100;10;#418c00;Planet;planet---
            var objs_copy=[]
            
            var start_button;
            
            var setting={
                start:false,
                G:0.001,
                light_general:"#ff0000",
                general_light:new THREE.AmbientLight(0x418c00),
                ok: function(){
                    g=this.G
                    this.general_light.color=new THREE.Color(this.light_general); // soft white light
                },
                starter:function(){
                    if(this.start){
                        start_button.name("Start")
                    }else{
                        time+=1
                        start_button.name("Stop")
                        gui.close()
                        
                    }
                    this.start=!this.start
                },
                reloader:function(){
                    objs=objs_copy
                }
            }
            
            start_button=gui.add(setting, 'starter').name("Start")
            //gui.add(setting, 'reloader').name("Reload")
            
            scene.add(setting.general_light);
            
            
            class Objects{
                constructor(coord, velocity,  params, name, objType){
                    
                    this.coord=coord
                    this.coord_=coord
                    this.velocity=velocity
                    this.velocity_=velocity
                    this.accel=[0,0,0];
                    this.params=params
                    this.name=name
                    
                    this.points=[]
                    this.toTrace=false    
                    var materialLine = new THREE.LineBasicMaterial({color: new THREE.Color(setting.general_light)});
                    var geometryLine = new THREE.BufferGeometry().setFromPoints( this.points );
                    this.line = new THREE.Line( geometryLine, materialLine );
                    scene.add(this.line);
                    
                    this.data=gui.addFolder(name)
                    this.data.add(params, 0).name("Mass")
                    this.data.add(this, 'toTrace', [true, false]).name("Trace")
                    var coods=[this.data.add(coord, 0), this.data.add(coord, 1), this.data.add(coord, 2)]
                    for(var i=0; i<3; i++){
                    coods[i].domElement.style.pointerEvents = "none"
                    coods[i].listen()
                    }
                    coods[0].name("X")
                    coods[1].name("Y")
                    coods[2].name("Z")
                    var vels=[this.data.add(velocity, 0), this.data.add(velocity, 1), this.data.add(velocity, 2)]
                    for(var i=0; i<3; i++){
                    vels[i].domElement.style.pointerEvents = "none"
                    vels[i].listen()
                    }
                    vels[0].name("VelocityX")
                    vels[1].name("VelocityY")
                    vels[2].name("VelocityZ")
                    
                    
                    
                    this.objType=objType
                    if(objType=="planet"){
                        this.generatePlanet()
                    }
                    if(objType=="star"){
                        this.generateStar()
                    }
                    
                        
                }
                generatePlanet(){
                    var geometry = new THREE.SphereGeometry( this.params[1], 32, 32 );
                    this.obj = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial({shininess:1200, color: new THREE.Color(this.params[2])})); 
                    scene.add( this.obj ); 
                }
                generateStar(){
                    var geometry = new THREE.SphereGeometry( this.params[1], 32, 32 );
                    this.obj = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial({emissive:new THREE.Color(this.params[2])})); 
                    scene.add(this.obj);   
                }
                
                confirm(){
//                    if(this.objType=="star"){
//                        this.point_light.position.set(this.coord[0], this.coord[1], this.coord[2])
//                    }
                }
            }
            
            var settings=gui.addFolder('Settings')
            settings.addColor(setting, 'light_general')
            settings.add(setting, 'G')
            settings.add(setting, 'ok')
            
            
            
            var conv=gui.addFolder("Convert")
            
            
            
            var adding=gui.addFolder("Add")
            
            convInfo={
                str:"152?-103.89082534730494;848.0817909805747;-178.77974029922584;0.6027111440278745;-4.687650822595904;1.1914451816408076;1000;2;#4220ff;0;star---11.293006248583973;765.6384439041205;154.9031060916996;-0.06663800826285896;-4.237909272939476;-1.0258809239994364;1000;2;#4220ff;1;star---147.01612372088678;815.1411071951078;-743.1594009753384;-0.8624835364642656;-4.510866222178147;4.9435232959446225;1000;2;#4220ff;2;star---281.9245880158827;788.6200619483791;-515.6452421837655;-1.6387051241436152;-4.361854848291005;3.434722156409067;1000;2;#4220ff;3;star---380.85231221887943;706.4104182443295;-100.40055474044433;-2.214177355010311;-3.904850591754109;0.6712427496196638;1000;2;#4220ff;4;star---461.70974731475957;617.4389164518315;-748.6581769196397;-2.6845991074409046;-3.4202638941972454;4.981387473338953;1000;2;#4220ff;5;star---564.6359735334826;512.2226389975751;1130.097691063077;-3.2940928523110147;-2.827779533687061;-7.522323836848774;1000;2;#4220ff;6;star---642.378385243368;412.05538220452615;965.2493836249375;-3.738607578745042;-2.2832272306320713;-6.430133179706485;1000;2;#4220ff;7;star---759.5742643615546;297.8305238471893;113.27368967286152;-4.423576760213448;-1.6184355980764593;-0.7493963449514274;1000;2;#4220ff;8;star---863.5549039109167;214.7561729841223;101.15900027384473;-5.0069555650354225;-1.1841478103714447;-0.6699012960793621;1000;2;#4220ff;9;star---1010.9394370750442;148.08414266140034;-421.09716253986346;-5.890218597292589;-0.8001665184565881;2.800724505269901;1000;2;#4220ff;10;star---1117.5901669853235;110.1817838230191;-543.2464376200929;-6.482321362755407;-0.6078094717206473;3.6037923466431248;1000;2;#4220ff;11;star---1089.0565766760883;46.640765951227884;-217.00421331286228;-6.324041660217182;-0.25758555369362857;1.448235371518267;1000;2;#4220ff;12;star---1010.9356195130017;-23.664229434620648;481.0833306761715;-5.878115204906245;0.1368953360165282;-3.195524984948476;1000;2;#4220ff;13;star---916.1340046992372;-104.3127148798709;-278.9825157066179;-5.322406852021493;0.5761577963695736;1.8482961563304134;1000;2;#4220ff;14;star---775.6423222947343;-151.7143748452036;95.43392356808695;-4.493596334354959;0.8396922176153349;-0.6223968382159789;1000;2;#4220ff;15;star----320.1569124963739;787.5219887047822;-408.2129016572509;1.8649706091325524;-4.350059736668554;2.714963055867641;1000;2;#4220ff;16;star----422.8308232910519;670.41859278581;-397.26031905310623;2.4530198455280883;-3.7179767117376152;2.6423671976483556;1000;2;#4220ff;17;star----558.928040725094;560.7571892908394;179.94271014396628;3.254815818510982;-3.0919028057228064;-1.1924106856845758;1000;2;#4220ff;18;star----688.1227741524286;434.3808079278562;-22.605973592820376;4.008196347284902;-2.3927712114976503;0.14461390887821834;1000;2;#4220ff;19;star----823.4306525093317;375.22719027015614;125.06132745496393;4.7839811470525735;-2.069809596671668;-0.8248104793637668;1000;2;#4220ff;20;star----944.1489791052901;350.9840823956956;-136.40897802266528;5.475099833706483;-1.920725516398232;0.904635305673749;1000;2;#4220ff;21;star----925.221421793122;247.66470772477172;-163.9720281527762;5.377262924164387;-1.3900439473056514;1.0832781799556674;1000;2;#4220ff;22;star----878.540987166394;164.1827752714849;257.7673353738954;5.100237192539183;-0.9163969226560933;-1.7101250540588246;1000;2;#4220ff;23;star----756.5115601466719;46.48579805769827;-255.31903024258872;4.395429324478652;-0.26610510007791505;1.6926908718435303;1000;2;#4220ff;24;star----585.9904865577246;176.0489804493418;178.26556197390522;3.3915597694580084;-0.957147888486292;-1.1850096795352136;1000;2;#4220ff;25;star----394.96098772822387;259.97253564016347;15.060858821697048;2.2963338050405797;-1.4271700169617239;-0.10393959538482345;1000;2;#4220ff;26;star----171.66479274995427;298.709152937896;-87.75536282142173;0.989654665931969;-1.6272958947325664;0.5768322072959122;1000;2;#4220ff;27;star---77.5073300059176;310.98310606704644;-422.37822867853725;-0.4593536565719144;-1.7091861511581197;2.801012238717982;1000;2;#4220ff;28;star---283.88498668378975;272.7561667085574;-257.8206912091726;-1.6524118953664209;-1.4857630236082675;1.7076893830733364;1000;2;#4220ff;29;star---456.5215134769629;212.40946033041885;172.2343981888044;-2.6542617253600422;-1.1401460273114248;-1.1315898401262554;1000;2;#4220ff;30;star---540.820209744617;111.33912678666515;-108.23484759365392;-3.1254035143107477;-0.5808869453270489;0.7049516317196047;1000;2;#4220ff;31;star---644.8107238259612;41.01456515662744;-624.0950726274874;-3.7496806459231515;-0.22298636036634245;4.142641869508436;1000;2;#4220ff;32;star----119.73524927811927;196.49648535578214;-17.79385126414429;0.690180705291423;-1.091432708313585;0.12188509208990489;1000;2;#4220ff;33;star---69.32407516889401;100.34175443620528;86.19977658335684;-0.42849512209240365;-0.5371863261228353;-0.558455192210117;1000;2;#4220ff;34;star---192.94352916176126;50.142588588724834;-126.96778599314601;-1.1018734286179375;-0.19155079434010963;0.8151335219712351;1000;2;#4220ff;35;star---146.60107998691402;25.084076946599467;-102.89138396251519;-0.9520743611242742;-0.144621205042972;0.6936330420800239;1000;2;#4220ff;36;star---198.96506237666773;-5.529920647908221;-119.88757924848892;-1.143175898774932;-0.05693284652698602;0.7805549103183991;1000;2;#4220ff;37;star---334.9556980450414;39.66984902290474;115.14374727681896;-1.962289711951639;-0.1596036500494664;-0.7455323780178842;1000;2;#4220ff;38;star---303.86009333718624;-18.857619673363956;153.9026479289553;-1.7986068490357794;0.060604052842716256;-0.9877452785037494;1000;2;#4220ff;39;star---466.18924353517485;42.73404792610916;3.786464087047606;-2.6742903102678985;-0.20912320916517946;-0.030713197882570053;1000;2;#4220ff;40;star----475.4978763876768;105.32370426901993;170.11403052278982;2.779156523547207;-0.5790975259617911;-1.1372294016057567;1000;2;#4220ff;41;star----484.55600642370985;2.1058788131252006;320.55674079919817;2.8392702229021953;-0.01630526979451519;-2.123973990514565;1000;2;#4220ff;42;star----449.17677785724584;-128.4894084318809;499.73463059831016;2.617847847776942;0.7078226016489504;-3.313510127975927;1000;2;#4220ff;43;star----280.1288364667498;-383.08221812179625;315.7691301550417;1.6336672687940677;2.0998748602777755;-2.095992602197088;1000;2;#4220ff;44;star----192.87119174669775;-479.96480823076354;694.1038023613453;1.1233880214611078;2.6451851831028663;-4.615329164589653;1000;2;#4220ff;45;star----21.097494189780967;-544.0690042976966;-160.21035018358725;0.11315931059852874;2.9924838806736407;1.0599409973988732;1000;2;#4220ff;46;star---198.66536839821663;-500.7991457203939;-5.233975164315512;-1.165353683164015;2.738219222599041;0.034201536231066546;1000;2;#4220ff;47;star---422.75383209802754;-260.8304422519454;-9.608089831059555;-2.534047096482935;1.5178357392283435;-0.016909909007278196;1000;2;#4220ff;48;star---485.0415733625185;-89.95344915084681;-290.557182603759;-2.8216271402382116;0.48754698087878173;1.9131926470562584;1000;2;#4220ff;49;star---299.7048310663561;-381.407641523063;-5.300131273218025;-1.7572238305652166;2.0844109776160336;0.033541785550191786;1000;2;#4220ff;50;star----801.9491557769593;-297.1846462215306;604.3361387455584;4.656955010456077;1.6394951603433054;-4.020878017264971;1000;2;#4220ff;51;star----676.0934714898207;-296.9464427563243;-582.1574046145075;3.928640544945079;1.637967866839167;3.872812706737903;1000;2;#4220ff;52;star----540.1670307304869;-302.4588863707128;452.67532068448145;3.13077842094551;1.657998915545913;-3.0093625931678374;1000;2;#4220ff;53;star----380.299787930775;-309.58850902115955;206.43232599994042;2.2025442906401;1.7064729180750815;-1.3812982493766814;1000;2;#4220ff;54;star----383.87587196703043;-225.43920791913436;-468.1590403657861;2.232228841679212;1.2449007097311238;3.1106633351190633;1000;2;#4220ff;55;star----102.03329210775009;-306.7670596540786;5.729157586281972;0.581929051889581;1.6915091398697668;-0.04237299310158245;1000;2;#4220ff;56;star---95.22787310605025;-318.3805899445475;152.4001268173964;-0.564231069578008;1.7525451012659556;-1.004806850607649;1000;2;#4220ff;57;star---433.7028031116859;-268.46387632698185;11.202278315753647;-2.4757092550967674;1.3678572603111312;0.030269745148933047;1000;2;#4220ff;58;star---612.4547307929591;-297.8327810940204;-74.9687774076079;-3.561534037955384;1.6495283074065172;0.4771944442598326;1000;2;#4220ff;59;star---771.2977196549909;-307.08617652504995;3.074704736462742;-4.475765004041396;1.7088055486169185;-0.0053219463168121955;1000;2;#4220ff;60;star---998.8308336997047;-298.7791930401635;546.3863861999397;-5.810224753598521;1.6491877103723627;-3.6295677326941287;1000;2;#4220ff;61;star---1200.5446209313895;-297.8405711856882;248.08616030877343;-6.977440528222408;1.6444703232061677;-1.6500257852298819;1000;2;#4220ff;62;star---792.0766837932093;-370.9696914727228;-59.65968013192424;-4.601004362188966;1.9888869615659626;0.3806106283082153;1000;2;#4220ff;63;star---942.8625155847761;-350.5416322907749;-93.23928393208867;-5.456442678521437;1.9240818773594779;0.6140844453958083;1000;2;#4220ff;64;star---599.1896289189475;-356.4244072509457;34.239428183433624;-3.4911524082785617;1.9192394674439601;-0.21024404849640063;1000;2;#4220ff;65;star---1420.430700631056;-308.07817183267906;-636.864009075306;-8.270325368689571;1.705067016630856;4.240749747613227;1000;2;#4220ff;66;star----595.917578675651;-7.758359992429488;299.57097365904053;3.4317205676008418;0.028909422642408;-1.992412377372437;1000;2;#4220ff;67;star---679.5074900211647;-53.981532339821115;71.61330230263098;-3.9458667224082067;0.3090764777968022;-0.4689048905752287;1000;2;#4220ff;68;star---396.46414175267284;7.492272878742373;36.31065733449577;-2.303500565734904;-0.06973631551861423;-0.2460590246664524;1000;2;#4220ff;69;star---",
                f:function(){
                    str_time=this.str.split('?')
                    STOP_TIME=parseInt(str_time[0])
                    objects_str=str_time[1].split('---')
                    for(i=0; i<objects_str.length-1; i++){
                        
                        var chars=objects_str[i].split(';')
                        objs.push(new Objects(
                        [parseFloat(chars[0]), parseFloat(chars[1]), parseFloat(chars[2])],
                        [parseFloat(chars[3]), parseFloat(chars[4]), parseFloat(chars[5])],
                        [parseFloat(chars[6]), parseFloat(chars[7]),  chars[8]],
                        chars[9],
                        chars[10]
                        ))
                        
                    }
                },
                p:function(){
                    this.str="-1?"
                    for(i=0;i<objs.length; i++){
                        this.str+=objs[i].coord[0]+";"+objs[i].coord[1]+";"+objs[i].coord[2]+";"+
                            (-objs[i].velocity[0])+";"+(-objs[i].velocity[1])+";"+(-objs[i].velocity[2])+";"+
                            objs[i].params[0]+";"+objs[i].params[1]+";"+objs[i].params[2]+";"+objs[i].name+";"+objs[i].objType+"---"
                    }
                }
            }
            convInfo.f()
            var strs=conv.add(convInfo, 'str')
            strs.name("G Code")
            strs.listen()
            conv.add(convInfo, 'f').name("Unparse")
            conv.add(convInfo, 'p').name("Parse")
            
            infoToAdd ={
                name: "planet X",
                objtype: "planet",
                colort: "#303030",
                mass: 100,
                radius: 10,
                x: 0,
                y: 0,
                z: 0,
                velx: 0,
                vely: 0,
                velz: 0,
                
            }
            adding.add(infoToAdd, 'name').name("Name")
            adding.add(infoToAdd, 'objtype', ['planet', 'star']).name("Type")
            adding.addColor(infoToAdd, 'colort').name("Color")
            adding.add(infoToAdd, 'mass').name("Mass")
            adding.add(infoToAdd, 'radius').name("Radius")
            adding.add(infoToAdd, 'x').name("X")
            adding.add(infoToAdd, 'y').name("Y")
            adding.add(infoToAdd, 'z').name("Z")
            adding.add(infoToAdd, 'velx').name("Velocity X")
            adding.add(infoToAdd, 'vely').name("Velocity Y")
            adding.add(infoToAdd, 'velz').name("Velocity Z")
            
            
            
            adding.add([addObject], 0).name("add")
            function addObject(){
                objs.push(new Objects([infoToAdd.x, infoToAdd.y, infoToAdd.z], [infoToAdd.velx, infoToAdd.vely, infoToAdd.velz], [infoToAdd.mass, infoToAdd.radius, infoToAdd.colort], infoToAdd.name, infoToAdd.objtype))
                
            }
            
            function confirm(objects){
                for(i=0; i<objects.length; i++){
                    objects[i].coord_=objects[i].coord
                    objects[i].velocity_=objects[i].velocity
                    objects[i].accel=[0,0,0]
                    objects[i].confirm()
                }
            }
            
    
            
            var renderer = new THREE.WebGLRenderer(); 
            renderer.setSize( WIDTH, HEIGHT ); 
            document.body.appendChild( renderer.domElement );
            

            
            controls = new THREE.OrbitControls( camera, renderer.domElement );
            controls.rotateSpeed = 1.0;
            controls.zoomSpeed = 1.2;
            controls.panSpeed = 0.8;
            controls.noZoom = false;
            controls.noPan = false;
            controls.staticMoving = true;
            controls.dynamicDampingFactor = 0.0;

            
//            console.log(111)
//            massive=[
//                [-3.0353810585678,9.4396586363085],[0,10],[2.9578850833057,9.6893780588866],[5.0805001752192,8.4407809459963],[6.3290972881095,6.3181658540828],[6.5788167106876,3.6961119170131],[5.3302195977972,1.9480759589667],[3.8319030623289,-0.0496794216578],[1.3347088365483,0.0751802896313],[-1.2873451005214,-0.0496794216578],[-4.2839781714581,0.8243385573654],[-4.4088378827471,3.5712522057241],[-4.4088378827471,6.8176046992389],[-4.4088378827471,-2.5468736474384],[-5.5828558617703,9.1899392137304],[-4.4088378827471,-5.418647007086],[-4.4088378827471,-8.2904203667337],[-2.5359422134117,-9.9135966134911],[0,-10],[2.4584462381495,-9.9135966134911],[4.9556404639301,-8.9147189231789],[6.9533958445546,-4.5446290280628],
//                [6.8285361332656,-7.0418232538434],[5.5799390203753,-2.0474348022822]
//            ]
//            k=0.03
//            for(var con=0; con<massive.length; con++){
//                objs.push(new Objects([massive[con][0]*10, massive[con][1]*10, 0],
//                                      [k*1.4*(massive[con][0]*10),k*(massive[con][1]*10),k*1.4/2*(massive[con][0]*10)+k/2*(massive[con][1]*10)],
//                                      [7000, 1, "#00d821"], ""+con, "planet"))
//            }
//            objs[5].mass=100000
//            objs[10].mass=100000
//            objs[20].mass=100000
            
            
            //267?-413.75195749173866;786.1858715675966;186.31429106828182;1.4238511192057437;-2.4108512435189353;-0.6121306206178726;7000;1;#00d821;0;planet---7.057717843614542;867.3319271345246;407.48779501510404;-0.03335259133994405;-2.7161347325218834;-1.4538483198885341;7000;1;#00d821;1;planet---392.3771068840204;815.1926461674765;567.0325357627814;-1.331680163199493;-2.516907236920139;-2.028677159323454;7000;1;#00d821;2;planet---600.7284756079895;698.6612995806147;624.4861809132619;-1.959112537909287;-2.1322159984459033;-2.2101609169126935;7000;1;#00d821;3;planet---713.3711098557835;548.9663366218698;609.1907560753244;-2.2613625986487;-1.7326332196858913;-2.157454029192698;7000;1;#00d821;4;planet---716.932678816805;305.8530490626377;506.7651647830836;-2.2630755761494146;-0.9437308134467732;-1.7779393155418401;7000;1;#00d821;5;planet---641.4184434821041;170.5009644701457;389.4367165618194;-2.098020143513203;-0.5478661948232231;-1.4003339073578724;7000;1;#00d821;6;planet---500.0768324318943;-5.111122012074216;229.36457595613837;-1.6939941331560588;0.030056752784593906;-0.8368025417808925;7000;1;#00d821;7;planet---185.49862977284835;4.314816109986495;85.9477481306078;-0.6335291009300792;-0.011751520088890808;-0.3149704022623527;7000;1;#00d821;8;planet----150.48349452897548;3.7223470105733516;-73.52488362426791;0.49479417167871165;-0.022828737684989196;0.26238024006598265;7000;1;#00d821;9;planet----469.06311198841274;93.87146350526922;-195.42247743605787;1.4902552673215215;-0.33076501901015987;0.6744401726669074;7000;1;#00d821;10;planet----503.19137246577816;289.44798751434763;-106.88665395785829;1.608724831057186;-0.869256629520622;0.38688252536293544;7000;1;#00d821;11;planet----542.4241100030349;699.244836295211;52.16514628961139;1.918549762482058;-2.713579658965056;-0.40413816283475873;7000;1;#00d821;12;planet----497.7443876334069;-238.26243284549216;-352.4022541914054;1.5928234741121734;0.7731843638371306;1.2565423090262937;7000;1;#00d821;13;planet----545.9833788362704;711.8970681604482;60.645948260433315;1.5182295246560749;-1.6661942999077974;0.0031926399750075406;7000;1;#00d821;14;planet----504.1835283536465;-488.957139602453;-470.7670398873041;1.611863004485654;1.5596364579120536;1.6779624043934702;7000;1;#00d821;15;planet----457.1537016981248;-719.9156033491893;-571.4409906647991;1.4059970490685036;2.2595745825372324;2.0103726004223827;7000;1;#00d821;16;planet----308.1193401466931;-827.703369173686;-545.4053240959165;1.0349208899646842;2.541403535658886;1.9419446142984642;7000;1;#00d821;17;planet---7.097724050254515;-874.9888654238857;-407.6041469205216;-0.025380156542653257;2.745300133797702;1.4521587806640428;7000;1;#00d821;18;planet---285.4767088908948;-861.2806006580173;-266.2042271057624;-0.9179029753025094;2.6991327386057438;0.9514273160420487;7000;1;#00d821;19;planet---595.6323906241948;-758.216992016038;-75.46403868661653;-1.9450811889755157;2.353302559472735;0.2587875907691937;7000;1;#00d821;20;planet---792.4219549581663;-438.79573178949306;190.3432867386699;-2.5389297815683816;1.4498252674800023;-0.6379116595064818;7000;1;#00d821;21;planet---789.9589212184234;-563.9427685710773;111.66572488173892;-2.54514217100882;1.6739870861570374;-0.4278254776728026;7000;1;#00d821;22;planet---638.5477637040578;-141.62040931407324;237.0289134788167;-2.0367082706752595;0.38872665564466036;-0.8475366327473695;7000;1;#00d821;23;planet---
            
            //main loop
            additional_fl=true
            
            dx=2
            function render() {
                
	            requestAnimationFrame(render);
                
                if(setting.start || additional_fl){
                    time+=1
                    if(time==STOP_TIME){
                        setting.start=false
                        start_button.name("start")
                        
                    }
                    additional_fl=false
                    objs_copy=objs
                for(i=0; i<objs.length; i++){
                    for(j=0; j<objs.length; j++){
                        if(i!=j){
                            distant_x=objs[i].coord_[0]-objs[j].coord_[0]
                            distant_y=objs[i].coord_[1]-objs[j].coord_[1]
                            distant_z=objs[i].coord_[2]-objs[j].coord_[2]
                            
                            distant=Math.sqrt(distant_x*distant_x+distant_y*distant_y+distant_z*distant_z)
                            
                            if(distant<=dx){
                                objs[i].accel=[0,0,0]
                            }
                            else{
                            objs[i].accel[0]+=-distant_x/(distant*distant*distant)*g*(objs[j].params[0])
                            objs[i].accel[1]+=-distant_y/(distant*distant*distant)*g*(objs[j].params[0])
                            objs[i].accel[2]+=-distant_z/(distant*distant*distant)*g*(objs[j].params[0])
                            }
                            
                        }
                    }
                    for(dim=0; dim<3; dim++){
                        objs[i].velocity[dim]=objs[i].velocity_[dim]+objs[i].accel[dim]
                        objs[i].coord[dim]=objs[i].coord[dim]+(objs[i].velocity[dim]+objs[i].velocity_[dim])/2
                    }
                }
                }
                for(i=0; i<objs.length; i++){
                    objs[i].obj.position.x=objs[i].coord[0]
                    objs[i].obj.position.y=objs[i].coord[1]
                    objs[i].obj.position.z=objs[i].coord[2]
                    
                    scene.remove(objs[i].line)
                    if(objs[i].toTrace=='true'){
                        objs[i].points.push( new THREE.Vector3(objs[i].coord[0],objs[i].coord[1],objs[i].coord[2]))
                        materialLine = new THREE.LineBasicMaterial({
	                       color: new THREE.Color(setting.general_light)
                        });
                        geometry = new THREE.BufferGeometry().setFromPoints( objs[i].points );
                        objs[i].line = new THREE.Line( geometry, materialLine );
                        scene.add(objs[i].line);
                    }
                }
                           
                confirm(objs)
                
                
	           renderer.render(scene, camera)
            }
            render()
            
		</script>
	</body>
</html>