<!DOCTYPE html>
<html>	
	<head>
		<title>Gravity phenomenon</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="Libraries/three/build/three.js"></script>
        <script type="text/javascript" src="Libraries/three/examples/js/controls/OrbitControls.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>
        
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<style>
		  body{
		/* set margin to 0 and overflow to hidden, 
		to use the complete page */
		      margin: 0;
		      overflow: hidden;
		  }
          #gui { 
              position: absolute; 
              top: 2px; 
              left: 2px; 
            }
            @media only screen and (max-width: 768px) {
                #gui{
                    width: 100%;
                }
            }
		</style>
	</head>
	<body>
		<!--Div which will hold the Output -->
        
        <div id="WebGL-output">
        </div>
        
		<!--Javascript code that runs our Three.js examples -->
		<script type="text/javascript">
            
            const HEIGHT=window.innerHeight
            const WIDTH=window.innerWidth
            
            var g=0.001
            var STOP_TIME=-1
            time=0
		    var scene = new THREE.Scene();
            //window.addEventListener("wheel", onMouseWheel);
            
            
            
            //setting camera
            var camera = new THREE.PerspectiveCamera(100, WIDTH / HEIGHT, 0.1, 100000);
            camera.position.z = 200;
            

            var material =new THREE.MeshPhongMaterial({shininess:10, color: 0xffffff})
            
            
            var gui = new dat.gui.GUI();
            gui.domElement.id = 'gui';
            
            var objs=[]/*
                 new Objects([0,0,0], [0,0,0], [100000, 30], "1", "star"),
                 new Objects([100,0,0], [0,1,0], [100, 7], "2", "planet"),
                 new Objects([-100,0,0], [0,0.65,0.4], [100, 10], "3", "planet")    
                     ]   */
            
            //0;0;0;0;0;0;100000;30;#ffffff;Star;star---0;100;0;1;0;0;100;10;#418c00;Planet;planet---
            var objs_copy=[]
            
            var start_button;
            
            var setting={
                start:false,
                G:0.001,
                light_general:"#ff0000",
                general_light:new THREE.AmbientLight(0x418c00),
                ok: function(){
                    g=this.G
                    this.general_light.color=new THREE.Color(this.light_general); // soft white light
                },
                starter:function(){
                    if(this.start){
                        start_button.name("Start")
                    }else{
                        time+=1
                        start_button.name("Stop")
                        gui.close()
                        
                    }
                    this.start=!this.start
                },
                reloader:function(){
                    objs=objs_copy
                }
            }
            
            start_button=gui.add(setting, 'starter').name("Start")
            //gui.add(setting, 'reloader').name("Reload")
            
            scene.add(setting.general_light);
            
            
            class Objects{
                constructor(coord, velocity,  params, name, objType){
                    
                    this.coord=coord
                    this.coord_=coord
                    this.velocity=velocity
                    this.velocity_=velocity
                    this.accel=[0,0,0];
                    this.params=params
                    this.name=name
                    
                    this.points=[]
                    this.toTrace=false    
                    var materialLine = new THREE.LineBasicMaterial({color: new THREE.Color(setting.general_light)});
                    var geometryLine = new THREE.BufferGeometry().setFromPoints( this.points );
                    this.line = new THREE.Line( geometryLine, materialLine );
                    scene.add(this.line);
                    
                    this.data=gui.addFolder(name)
                    this.data.add(params, 0).name("Mass")
                    this.data.add(this, 'toTrace', [true, false]).name("Trace")
                    var coods=[this.data.add(coord, 0), this.data.add(coord, 1), this.data.add(coord, 2)]
                    for(var i=0; i<3; i++){
                    coods[i].domElement.style.pointerEvents = "none"
                    coods[i].listen()
                    }
                    coods[0].name("X")
                    coods[1].name("Y")
                    coods[2].name("Z")
                    var vels=[this.data.add(velocity, 0), this.data.add(velocity, 1), this.data.add(velocity, 2)]
                    for(var i=0; i<3; i++){
                    vels[i].domElement.style.pointerEvents = "none"
                    vels[i].listen()
                    }
                    vels[0].name("VelocityX")
                    vels[1].name("VelocityY")
                    vels[2].name("VelocityZ")
                    
                    
                    
                    this.objType=objType
                    if(objType=="planet"){
                        this.generatePlanet()
                    }
                    if(objType=="star"){
                        this.generateStar()
                    }
                    
                        
                }
                generatePlanet(){
                    var geometry = new THREE.SphereGeometry( this.params[1], 32, 32 );
                    this.obj = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial({shininess:1200, color: new THREE.Color(this.params[2])})); 
                    scene.add( this.obj ); 
                }
                generateStar(){
                    var geometry = new THREE.SphereGeometry( this.params[1], 32, 32 );
                    this.obj = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial({emissive:new THREE.Color(this.params[2])})); 
                    scene.add(this.obj);   
                }
                
                confirm(){
//                    if(this.objType=="star"){
//                        this.point_light.position.set(this.coord[0], this.coord[1], this.coord[2])
//                    }
                }
            }
            
            var settings=gui.addFolder('Settings')
            settings.addColor(setting, 'light_general')
            settings.add(setting, 'G')
            settings.add(setting, 'ok')
            
            
            
            var conv=gui.addFolder("Convert")
            
            
            var adding=gui.addFolder("Add")
            
            convInfo={
                str:"149?-133.12664499902752;1055.6259656729833;1237.2704105380828;0.8095695766940221;-6.1625492562736905;-8.353387535931908;1000;2;#4220ff;0;star---14.109198894603876;947.4600204558627;262.8979686666692;-0.08711272244033284;-5.526303080305489;-1.7751125479161327;1000;2;#4220ff;1;star---183.88603265265886;1014.2169358732934;-1083.1343727094481;-1.122266020800139;-5.922120486745279;7.316813919665718;1000;2;#4220ff;2;star---393.2809214368646;989.2626643559103;1415.3646057156523;-2.3882419212861206;-5.774346318627354;-9.558117133219964;1000;2;#4220ff;3;star---477.55873820692335;874.5502574539852;414.7692787893891;-2.899811065296504;-5.097392632500313;-2.7980200579782393;1000;2;#4220ff;4;star---579.3615903868603;760.5034945499656;-93.50109888941239;-3.5191456010579065;-4.427199045842866;0.6325380105265055;1000;2;#4220ff;5;star---700.8361832650564;637.3019054228868;-391.308860055823;-4.254187595263001;-3.709151371172281;2.637750820442595;1000;2;#4220ff;6;star---803.2804313035704;509.52388783180663;1295.7968946777328;-4.878602279453208;-2.9718960993430303;-8.749081703763636;1000;2;#4220ff;7;star---946.6161575143253;374.7897800610839;-245.76319901144507;-5.742950162261415;-2.1712069984923255;1.660547637321317;1000;2;#4220ff;8;star---1084.5764157115348;264.8019050918299;-677.9570951001533;-6.582690121066159;-1.535625999988234;4.570049551435705;1000;2;#4220ff;9;star---1260.8392874699387;186.59287465374967;-231.151073292509;-7.656696279583097;-1.073401992694553;1.5686899051119183;1000;2;#4220ff;10;star---1395.9925241597493;126.40808349638463;-395.24877881223404;-8.441140022336821;-0.6954744592825547;2.6552445993757887;1000;2;#4220ff;11;star---1368.2522353944132;65.25534819499804;-372.1727176563128;-8.31450269591328;-0.4113201037747063;2.517481131603233;1000;2;#4220ff;12;star---1265.798541729789;-27.926292038903522;1005.6854968059125;-7.685524917255598;0.1645044492647161;-6.787993349095861;1000;2;#4220ff;13;star---1147.4998305720155;-128.15238933543424;-653.6987426871649;-6.963008468954802;0.7433885248587851;4.4064213643203605;1000;2;#4220ff;14;star---969.1258183313977;-188.90964047240647;35.10110733338208;-5.865172457590863;1.1066659544651523;-0.23180343464689143;1000;2;#4220ff;15;star----397.3629280822112;982.1204306582415;843.6593455791901;2.406937433021134;-5.737967959990431;-5.694797568959753;1000;2;#4220ff;16;star----531.4616261777132;826.388622209831;37.536435315361004;3.228169550545274;-4.814956412579891;-0.2519947454264194;1000;2;#4220ff;17;star----697.2047748926032;697.1104350314952;-222.23722436505642;4.23245265651983;-4.06029001817904;1.4959114025596671;1000;2;#4220ff;18;star----857.1017073702606;541.1441363492205;-48.76401198923405;5.201265492847976;-3.1528201703223484;0.3299740890200473;1000;2;#4220ff;19;star----1031.318361080501;464.8444237024159;348.3402946169205;6.263109616696981;-2.702743006787297;-2.348327277202391;1000;2;#4220ff;20;star----1186.7981269418442;441.7240494115385;-237.3231406158443;7.1974046384262715;-2.5760397528123016;1.5993683043412328;1000;2;#4220ff;21;star----1155.2577699668034;299.1476240047671;334.34104882552583;7.0020045829447675;-1.742585625058686;-2.2614705506007193;1000;2;#4220ff;22;star----1103.3883034958983;204.65131543091871;475.9766137782883;6.699815749412721;-1.2065506521984846;-3.205557802539295;1000;2;#4220ff;23;star----946.7511270395554;54.64218392918315;-777.0648256637483;5.741951088569443;-0.3195460871137092;5.242301177840634;1000;2;#4220ff;24;star----734.3022398673529;221.45590703029436;-296.5937791144155;4.443237753854444;-1.2822876115836934;1.9986859414752136;1000;2;#4220ff;25;star----493.2161845182524;324.35822538638416;3.931401820143656;2.991552423872308;-1.8850368136419084;-0.021532873341437372;1000;2;#4220ff;26;star----215.9955920888798;375.07818149129395;-270.671258764343;1.3057931478318467;-2.17375504795491;1.8207942611351358;1000;2;#4220ff;27;star---94.63322278884826;384.8470273664871;-23.276335670856668;-0.5778031899956;-2.226314711166692;0.1603757422432179;1000;2;#4220ff;28;star---355.435054853629;343.48294510486807;502.14320277678604;-2.161089273029984;-1.993296848419466;-3.381771730164926;1000;2;#4220ff;29;star---571.3091687912416;267.1782471982822;-204.0908439645119;-3.467998524836027;-1.5313833640275545;1.3763547094589204;1000;2;#4220ff;30;star---683.7151512139577;146.34771900159717;-433.7066501906409;-4.145479655716776;-0.8385747346443038;2.916864446656404;1000;2;#4220ff;31;star---805.0694638568192;52.36196606415035;-751.1038445167816;-4.88427534799822;-0.3044993274293288;5.059117985466901;1000;2;#4220ff;32;star----149.47465499726835;241.44337679030784;-42.28841151620226;0.8981260239518657;-1.4060921415073582;0.2908108032988298;1000;2;#4220ff;33;star---84.25878731213703;124.87344494404923;-203.98019212412765;-0.5389680302281183;-0.7058336531075845;1.3690926750046315;1000;2;#4220ff;34;star---271.31428068081226;96.97785108564521;-327.75675471336615;-1.651503702643967;-0.545543337963712;2.1931017658075245;1000;2;#4220ff;35;star---160.29444328587894;28.654456815921126;-149.9929182579472;-1.0019271524744848;-0.17235361076149908;1.0102309904355082;1000;2;#4220ff;36;star---261.78559351231706;-28.43372088279518;-46.0931885673539;-1.6266999859933002;0.15140722133561188;0.3222294492146628;1000;2;#4220ff;37;star---415.8682071464164;60.19641034492313;84.4662766660737;-2.5328770693693436;-0.32072109742101007;-0.5486865719773327;1000;2;#4220ff;38;star---367.90437912500965;-34.61740639079906;-45.92042325384595;-2.2284470045594156;0.18813952382036658;0.31563421349592713;1000;2;#4220ff;39;star---591.4407846123936;52.55363799953828;89.92756899717959;-3.5724416223878084;-0.2847569875318357;-0.5929999027810626;1000;2;#4220ff;40;star----589.9900425315716;132.00439484774682;-244.31751839176388;3.583997684356907;-0.7678161352591651;1.652391702096972;1000;2;#4220ff;41;star----595.9617336946732;0.18697845585172745;-448.0293353086005;3.614490588294099;0.0016053931869744542;3.0173010116489896;1000;2;#4220ff;42;star----558.0557707498141;-159.2499892010191;-447.1416521066944;3.3844855850600517;0.9199566944240134;3.0162434745400852;1000;2;#4220ff;43;star----347.56544203708495;-477.86470616330746;508.9865598797593;2.1090674456903895;2.7765224087521982;-3.4294882622594947;1000;2;#4220ff;44;star----237.06304587608204;-594.5423923015079;-172.2641658145481;1.4305648281262746;3.452826237250411;1.1627659896870608;1000;2;#4220ff;45;star----29.18963493171612;-675.064648094959;3.8746914044068683;0.1726912382629966;3.920167067884107;-0.024022073243764135;1000;2;#4220ff;46;star---247.06199538986064;-624.4775384600185;209.02970268865906;-1.505076159159187;3.62091086910544;-1.4019283941319138;1000;2;#4220ff;47;star---518.0173159878384;-308.16543360576026;-55.57665428333177;-3.175642918410335;1.8315697654210579;0.35664327151119724;1000;2;#4220ff;48;star---599.52057792353;-119.639019117686;-271.6910645630182;-3.621468007390328;0.7057817240650165;1.8115477748782742;1000;2;#4220ff;49;star---371.40916701638406;-464.7499426299064;42.546718903122354;-2.262712216123038;2.6703329670590654;-0.27304355987352097;1000;2;#4220ff;50;star----1004.4854936297902;-368.87920039464956;-548.8183365608043;6.092016604278416;2.147034320999809;3.704502585795912;1000;2;#4220ff;51;star----843.1535167772249;-368.7535244471366;554.9336457946658;5.109577365158203;2.145987586601167;-3.7415890436532937;1000;2;#4220ff;52;star----678.1355435888438;-377.5387175678425;262.0958182296852;4.108423496533565;2.1932937720875567;-1.770673138602772;1000;2;#4220ff;53;star----473.871250287845;-382.5269003464527;-596.2471129152663;2.866564317223895;2.2214338380169893;4.017134437480438;1000;2;#4220ff;54;star----479.948894533408;-281.2046518270809;382.1649015724032;2.9143515488713048;1.643129290565763;-2.575622173124047;1000;2;#4220ff;55;star----136.45877612887733;-381.08559725161064;-491.2606605008369;0.8382568484511016;2.2197577448721537;3.307304845328385;1000;2;#4220ff;56;star---122.0688577684503;-395.247255063686;-6.268086504424109;-0.7590447982000873;2.2984769555124474;0.045181680868253755;1000;2;#4220ff;57;star---541.5177940607668;-342.2089748895964;-23.413654057444106;-3.2582761780649876;1.9094555925626906;0.19458232580714918;1000;2;#4220ff;58;star---763.5072516166063;-366.25778301886515;135.38259267173274;-4.630617308281551;2.1342627105404106;-0.8936797948290823;1000;2;#4220ff;59;star---962.9215521408488;-376.6821891919077;35.226378938640245;-5.831238049700201;2.1951968751313142;-0.23045834716490157;1000;2;#4220ff;60;star---1251.9110914001906;-378.64280297960306;409.4983757800278;-7.5990075588032715;2.218942197346934;-2.7495499435141193;1000;2;#4220ff;61;star---1503.5861631471894;-369.5264765148976;-349.5071928051454;-9.12557901063617;2.1513613602221815;2.3594549453877676;1000;2;#4220ff;62;star---987.9928017779971;-471.511318338456;-72.28189546703636;-5.987359489974584;2.7131987795922767;0.47627379984625606;1000;2;#4220ff;63;star---1280.9780704404486;-429.7567662432728;242.0819098498965;-7.771255171756822;2.4874009923505027;-1.6388318764227374;1000;2;#4220ff;64;star---745.1404454915826;-449.5116690623338;-11.933438245412589;-4.522094030610769;2.583365064054344;0.07527428155425336;1000;2;#4220ff;65;star---1772.5716544263341;-381.65940120514887;-684.7209174756543;-10.76169616177747;2.226007703704281;4.6220256216110736;1000;2;#4220ff;66;star----758.9495698850355;-15.202542956304296;448.978316104646;4.603614540259979;0.08826719562930169;-3.0267396440348664;1000;2;#4220ff;67;star---846.3280227411585;-66.56748866421285;-26.975047496873213;-5.1253959578490615;0.39799523717976726;0.18407561162818972;1000;2;#4220ff;68;star---497.6817629177097;-6.475300041920419;-159.80555783211832;-3.0131289700098236;0.04921686069174294;1.0682813661455484;1000;2;#4220ff;69;star----280.020487462357;1136.763499225197;746.2920844830829;1.701931793016905;-6.627209250300741;-5.0421949589278485;1000;2;#4220ff;70;star---285.4721061735136;1071.3875608897895;-1377.4882065208744;-1.726959176552462;-6.250753974483165;9.299258677669863;1000;2;#4220ff;71;star---662.7596886378833;-13.81094956934717;503.3243128006248;-4.018883805907416;0.08015770656085944;-3.383598012535817;1000;2;#4220ff;72;star---552.1123799250704;-211.41178500841175;-211.55160296680504;-3.35759834196032;1.218831772567684;1.414986646775569;1000;2;#4220ff;73;star----287.5127003122395;-390.97216155470994;-426.8005100172049;1.7344645989341099;2.2768006678132404;2.881893004108974;1000;2;#4220ff;74;star---362.3686593429116;-389.8307570322833;-82.1838247789042;-2.222747112363783;2.2650670364188454;0.5431583290050896;1000;2;#4220ff;75;star---",
                f:function(){
                    str_time=this.str.split('?')
                    STOP_TIME=parseInt(str_time[0])
                    objects_str=str_time[1].split('---')
                    for(i=0; i<objects_str.length-1; i++){
                        
                        var chars=objects_str[i].split(';')
                        objs.push(new Objects(
                        [parseFloat(chars[0]), parseFloat(chars[1]), parseFloat(chars[2])],
                        [parseFloat(chars[3]), parseFloat(chars[4]), parseFloat(chars[5])],
                        [parseFloat(chars[6]), parseFloat(chars[7]),  chars[8]],
                        chars[9],
                        chars[10]
                        ))
                        
                    }
                },
                p:function(){
                    this.str="-1?"
                    for(i=0;i<objs.length; i++){
                        this.str+=objs[i].coord[0]+";"+objs[i].coord[1]+";"+objs[i].coord[2]+";"+
                            (-objs[i].velocity[0])+";"+(-objs[i].velocity[1])+";"+(-objs[i].velocity[2])+";"+
                            objs[i].params[0]+";"+objs[i].params[1]+";"+objs[i].params[2]+";"+objs[i].name+";"+objs[i].objType+"---"
                    }
                }
            }
            convInfo.f()
            var strs=conv.add(convInfo, 'str')
            strs.name("G Code")
            strs.listen()
            conv.add(convInfo, 'f').name("Unparse")
            conv.add(convInfo, 'p').name("Parse")
            
            infoToAdd ={
                name: "planet X",
                objtype: "planet",
                colort: "#303030",
                mass: 100,
                radius: 10,
                x: 0,
                y: 0,
                z: 0,
                velx: 0,
                vely: 0,
                velz: 0,
                
            }
            adding.add(infoToAdd, 'name').name("Name")
            adding.add(infoToAdd, 'objtype', ['planet', 'star']).name("Type")
            adding.addColor(infoToAdd, 'colort').name("Color")
            adding.add(infoToAdd, 'mass').name("Mass")
            adding.add(infoToAdd, 'radius').name("Radius")
            adding.add(infoToAdd, 'x').name("X")
            adding.add(infoToAdd, 'y').name("Y")
            adding.add(infoToAdd, 'z').name("Z")
            adding.add(infoToAdd, 'velx').name("Velocity X")
            adding.add(infoToAdd, 'vely').name("Velocity Y")
            adding.add(infoToAdd, 'velz').name("Velocity Z")
            
            
            
            adding.add([addObject], 0).name("add")
            function addObject(){
                objs.push(new Objects([infoToAdd.x, infoToAdd.y, infoToAdd.z], [infoToAdd.velx, infoToAdd.vely, infoToAdd.velz], [infoToAdd.mass, infoToAdd.radius, infoToAdd.colort], infoToAdd.name, infoToAdd.objtype))
                
            }
            
            function confirm(objects){
                for(i=0; i<objects.length; i++){
                    objects[i].coord_=objects[i].coord
                    objects[i].velocity_=objects[i].velocity
                    objects[i].accel=[0,0,0]
                    objects[i].confirm()
                }
            }
            
    
            
            var renderer = new THREE.WebGLRenderer(); 
            renderer.setSize( WIDTH, HEIGHT ); 
            document.body.appendChild( renderer.domElement );
            

            
            controls = new THREE.OrbitControls( camera, renderer.domElement );
            controls.rotateSpeed = 1.0;
            controls.zoomSpeed = 1.2;
            controls.panSpeed = 0.8;
            controls.noZoom = false;
            controls.noPan = false;
            controls.staticMoving = true;
            controls.dynamicDampingFactor = 0.0;

            
//            console.log(111)
//            massive=[
//                [-3.0353810585678,9.4396586363085],[0,10],[2.9578850833057,9.6893780588866],[5.0805001752192,8.4407809459963],[6.3290972881095,6.3181658540828],[6.5788167106876,3.6961119170131],[5.3302195977972,1.9480759589667],[3.8319030623289,-0.0496794216578],[1.3347088365483,0.0751802896313],[-1.2873451005214,-0.0496794216578],[-4.2839781714581,0.8243385573654],[-4.4088378827471,3.5712522057241],[-4.4088378827471,6.8176046992389],[-4.4088378827471,-2.5468736474384],[-5.5828558617703,9.1899392137304],[-4.4088378827471,-5.418647007086],[-4.4088378827471,-8.2904203667337],[-2.5359422134117,-9.9135966134911],[0,-10],[2.4584462381495,-9.9135966134911],[4.9556404639301,-8.9147189231789],[6.9533958445546,-4.5446290280628],
//                [6.8285361332656,-7.0418232538434],[5.5799390203753,-2.0474348022822]
//            ]
//            k=0.03
//            for(var con=0; con<massive.length; con++){
//                objs.push(new Objects([massive[con][0]*10, massive[con][1]*10, 0],
//                                      [k*1.4*(massive[con][0]*10),k*(massive[con][1]*10),k*1.4/2*(massive[con][0]*10)+k/2*(massive[con][1]*10)],
//                                      [7000, 1, "#00d821"], ""+con, "planet"))
//            }
//            objs[5].mass=100000
//            objs[10].mass=100000
//            objs[20].mass=100000
            
            
            //267?-413.75195749173866;786.1858715675966;186.31429106828182;1.4238511192057437;-2.4108512435189353;-0.6121306206178726;7000;1;#00d821;0;planet---7.057717843614542;867.3319271345246;407.48779501510404;-0.03335259133994405;-2.7161347325218834;-1.4538483198885341;7000;1;#00d821;1;planet---392.3771068840204;815.1926461674765;567.0325357627814;-1.331680163199493;-2.516907236920139;-2.028677159323454;7000;1;#00d821;2;planet---600.7284756079895;698.6612995806147;624.4861809132619;-1.959112537909287;-2.1322159984459033;-2.2101609169126935;7000;1;#00d821;3;planet---713.3711098557835;548.9663366218698;609.1907560753244;-2.2613625986487;-1.7326332196858913;-2.157454029192698;7000;1;#00d821;4;planet---716.932678816805;305.8530490626377;506.7651647830836;-2.2630755761494146;-0.9437308134467732;-1.7779393155418401;7000;1;#00d821;5;planet---641.4184434821041;170.5009644701457;389.4367165618194;-2.098020143513203;-0.5478661948232231;-1.4003339073578724;7000;1;#00d821;6;planet---500.0768324318943;-5.111122012074216;229.36457595613837;-1.6939941331560588;0.030056752784593906;-0.8368025417808925;7000;1;#00d821;7;planet---185.49862977284835;4.314816109986495;85.9477481306078;-0.6335291009300792;-0.011751520088890808;-0.3149704022623527;7000;1;#00d821;8;planet----150.48349452897548;3.7223470105733516;-73.52488362426791;0.49479417167871165;-0.022828737684989196;0.26238024006598265;7000;1;#00d821;9;planet----469.06311198841274;93.87146350526922;-195.42247743605787;1.4902552673215215;-0.33076501901015987;0.6744401726669074;7000;1;#00d821;10;planet----503.19137246577816;289.44798751434763;-106.88665395785829;1.608724831057186;-0.869256629520622;0.38688252536293544;7000;1;#00d821;11;planet----542.4241100030349;699.244836295211;52.16514628961139;1.918549762482058;-2.713579658965056;-0.40413816283475873;7000;1;#00d821;12;planet----497.7443876334069;-238.26243284549216;-352.4022541914054;1.5928234741121734;0.7731843638371306;1.2565423090262937;7000;1;#00d821;13;planet----545.9833788362704;711.8970681604482;60.645948260433315;1.5182295246560749;-1.6661942999077974;0.0031926399750075406;7000;1;#00d821;14;planet----504.1835283536465;-488.957139602453;-470.7670398873041;1.611863004485654;1.5596364579120536;1.6779624043934702;7000;1;#00d821;15;planet----457.1537016981248;-719.9156033491893;-571.4409906647991;1.4059970490685036;2.2595745825372324;2.0103726004223827;7000;1;#00d821;16;planet----308.1193401466931;-827.703369173686;-545.4053240959165;1.0349208899646842;2.541403535658886;1.9419446142984642;7000;1;#00d821;17;planet---7.097724050254515;-874.9888654238857;-407.6041469205216;-0.025380156542653257;2.745300133797702;1.4521587806640428;7000;1;#00d821;18;planet---285.4767088908948;-861.2806006580173;-266.2042271057624;-0.9179029753025094;2.6991327386057438;0.9514273160420487;7000;1;#00d821;19;planet---595.6323906241948;-758.216992016038;-75.46403868661653;-1.9450811889755157;2.353302559472735;0.2587875907691937;7000;1;#00d821;20;planet---792.4219549581663;-438.79573178949306;190.3432867386699;-2.5389297815683816;1.4498252674800023;-0.6379116595064818;7000;1;#00d821;21;planet---789.9589212184234;-563.9427685710773;111.66572488173892;-2.54514217100882;1.6739870861570374;-0.4278254776728026;7000;1;#00d821;22;planet---638.5477637040578;-141.62040931407324;237.0289134788167;-2.0367082706752595;0.38872665564466036;-0.8475366327473695;7000;1;#00d821;23;planet---
            
            //main loop
            additional_fl=true
            
            dx=2
            function render() {
                
	            requestAnimationFrame(render);
                
                if(setting.start || additional_fl){
                    time+=1
                    if(time==STOP_TIME){
                        setting.start=false
                        start_button.name("start")
                        
                    }
                    additional_fl=false
                    objs_copy=objs
                for(i=0; i<objs.length; i++){
                    for(j=0; j<objs.length; j++){
                        if(i!=j){
                            distant_x=objs[i].coord_[0]-objs[j].coord_[0]
                            distant_y=objs[i].coord_[1]-objs[j].coord_[1]
                            distant_z=objs[i].coord_[2]-objs[j].coord_[2]
                            
                            distant=Math.sqrt(distant_x*distant_x+distant_y*distant_y+distant_z*distant_z)
                            
                            if(distant<=dx){
                                objs[i].accel=[0,0,0]
                            }
                            else{
                            objs[i].accel[0]+=-distant_x/(distant*distant*distant)*g*(objs[j].params[0])
                            objs[i].accel[1]+=-distant_y/(distant*distant*distant)*g*(objs[j].params[0])
                            objs[i].accel[2]+=-distant_z/(distant*distant*distant)*g*(objs[j].params[0])
                            }
                            
                        }
                    }
                    for(dim=0; dim<3; dim++){
                        objs[i].velocity[dim]=objs[i].velocity_[dim]+objs[i].accel[dim]
                        objs[i].coord[dim]=objs[i].coord[dim]+(objs[i].velocity[dim]+objs[i].velocity_[dim])/2
                    }
                }
                }
                for(i=0; i<objs.length; i++){
                    objs[i].obj.position.x=objs[i].coord[0]
                    objs[i].obj.position.y=objs[i].coord[1]
                    objs[i].obj.position.z=objs[i].coord[2]
                    
                    scene.remove(objs[i].line)
                    if(objs[i].toTrace=='true'){
                        objs[i].points.push( new THREE.Vector3(objs[i].coord[0],objs[i].coord[1],objs[i].coord[2]))
                        materialLine = new THREE.LineBasicMaterial({
	                       color: new THREE.Color(setting.general_light)
                        });
                        geometry = new THREE.BufferGeometry().setFromPoints( objs[i].points );
                        objs[i].line = new THREE.Line( geometry, materialLine );
                        scene.add(objs[i].line);
                    }
                }
                           
                confirm(objs)
                
                
	           renderer.render(scene, camera)
            }
            render()
            
		</script>
	</body>
</html>